import{_ as N}from"./pagination-649f05bf.js";import{y as C,bk as w,b1 as $,b2 as P,ab as j,_ as x,aG as Y,o as g,c as _,a as s,t as o,d as l,w as m,h as b,n as p,U as y,L as T,z as L,D as S,G as A}from"./index-7502ddb7.js";/* empty css                        *//* empty css                    *//* empty css               */import"./el-tooltip-4ed993c7.js";/* empty css                  */import{t as I}from"./totalAssets-e75cd7f3.js";import{A as d}from"./wallet-ed15a6b6.js";const z={components:{totalAssets:I,Pagination:N},name:"Accounts",props:{pageType:{type:String,default:"etf"},paramsType:{type:String,default:"indices"},spotLabel:{type:String,default:"xianhuojiaoyishouye"}},data(){return{total:0,heYueType:0,contractData:[],deliveryData:[],spotData:[],contractTotalData:[],deliveryTotalData:[],spotTotalData:[],timer:null,futureTimer:null,spotTimer:null,pageNum:1,noNext:!1,noPre:!1,totalPageNum:0,headerMap:{etf:"etfZhanghu",coin:"shuzihuobiZhanghu",forex:"waihuiZhanghu",usStocks:"meiguZhanghu",cnStocks:"AguZhanghu",hkStocks:"gangguZhanghu",twStocks:"taiguZhanghu"}}},mounted(){this.getOrderList(),this.timer=setInterval(()=>{this.existToken&&this.getOrderList()},2e3),this.getAssetsAll()},methods:{handleSymbolImg:C,mergeSort:w,getFormatTime(e,t,i,c){return $.unix(i).format("YYYY-MM-DD HH:mm:ss")},gotoPage(e){this.$router.push(e)},getAssetsAll(){d.getAllAssets().then(e=>{e.code==0&&(this.total=e.data.total)})},getRowClass({rowIndex:e,columnIndex:t}){if(e==0)return{background:"#f8f8f9"}},rowStyles({row:e,rowIndex:t}){return{height:"50px"}},ChooseHeYueType(e){if(this.heYueType=e,this.pageNum=1,this.heYueType==0){this.getOrderList(),this.timer=setInterval(()=>{this.getOrderList()},2e3),clearInterval(this.futureTimer),this.futureTimer=null;return}if(this.heYueType==1){this.existToken&&this.getFutureList(),clearInterval(this.timer),this.timer=null;return}this.heYueType==2&&(this.existToken&&this.getSpotList(),clearInterval(this.timer),this.timer=null)},async getOrderList(){if(this.existToken){const e={page_no:this.pageNum,type:"orders",symbolType:this.paramsType};Promise.all([d.getOrderList(e),d.getOrderApplyList(e)]).then(t=>{const i=t[0].data,c=t[1].data,n=w([...i,...c]);this.contractData=n.slice(0,10),this.contractTotalData=n;const u=Math.ceil(n.length/10);this.totalPageNum=parseInt(n.length/10),this.noNext=this.pageNum>u||this.pageNum==u})}},getFutureList(){if(this.existToken){const e={page_no:this.pageNum,type:"orders",symbolType:this.paramsType};d.getFutureList(e).then(t=>{this.deliveryTotalData=t.data,this.deliveryData=t.data.slice(0,10);const i=Math.ceil(t.data.length/10);this.totalPageNum=parseInt(t.data.length/10),this.noNext=this.pageNum>i||this.pageNum==i})}},getSpotList(){if(this.existToken){const e={page_no:this.pageNum,type:"orders",isAll:!0,symbolType:this.paramsType};d.getSpotList(e).then(t=>{this.spotTotalData=t.data,this.spotData=t.data.slice(0,10);const i=Math.ceil(t.data.length/10);this.totalPageNum=parseInt(t.data.length/10),this.noNext=this.pageNum>i||this.pageNum==i})}},goContractPage(e){const t="sustainable",i=new Date().getTime();this.$router.push(`/${this.pageType}/constract/${e}?timestamp=${i}&RouterName=${t}`)},changePageNum(e){if(e=="next"){if(this.pageNum>this.totalPageNum)return;this.noNext||(this.pageNum=this.pageNum+1)}else!this.noPre&&this.pageNum>1&&(this.pageNum=this.pageNum-1);const t=(this.pageNum-1)*10;let i=t+10;this.heYueType==0?this.contractData=this.contractTotalData.slice(t,i):this.heYueType==1?this.deliveryData=this.deliveryTotalData.slice(t,i):this.spotData=this.spotTotalData.slice(t,i)}},computed:{...P(j,["existToken"])},unmounted(){clearInterval(this.timer),clearInterval(this.futureTimer),clearInterval(this.spotTimer),this.timer=null,this.futureTimer=null,this.spotTimer=null}},M={class:"right-view"},O={class:"right-header"},Z={class:"right-header-box"},F={class:"padding-left-right20"},H={class:"margin-top-bottom20"},B={class:"tab-customize-box"},R={class:"flex-row-center"},E={class:"itemContentCenter",style:{"margin-left":"5px"}};function V(e,t,i,c,n,u){const v=L,k=Y("total-assets"),r=S,f=A,D=N;return g(),_("div",M,[s("div",O,[s("div",Z,[s("div",null,o(e.$t(`message.user.${n.headerMap[i.pageType]}`)),1),s("div",null,[l(v,{type:"primary",style:{width:"100px","margin-right":"10px"},onClick:t[0]||(t[0]=a=>u.gotoPage("/recharge"))},{default:m(()=>[b(o(e.$t("message.user.chongzhi")),1)]),_:1}),s("button",{class:"light-grey-button",onClick:t[1]||(t[1]=a=>u.gotoPage("/withdraw"))},o(e.$t("message.user.tixian")),1),s("button",{class:"light-grey-button",onClick:t[2]||(t[2]=a=>u.gotoPage("/exchange"))},o(e.$t("message.user.duihuan")),1)])])]),s("div",F,[s("div",H,[l(k,{pageType:i.pageType,paramsType:i.paramsType},null,8,["pageType","paramsType"]),s("div",B,[s("div",{class:p(["tab-customize",n.heYueType==0?"tabActive":""]),onClick:t[3]||(t[3]=a=>u.ChooseHeYueType(0))},o(e.$t("message.user.yongxuheyue")),3),s("div",{class:p(["tab-customize",n.heYueType==1?"tabActive":""]),onClick:t[4]||(t[4]=a=>u.ChooseHeYueType(1))},o(e.$t("message.home.jiaogeheyue")),3),i.pageType!=="forex"?(g(),_("div",{key:0,class:p(["tab-customize",n.heYueType==2?"tabActive":""]),onClick:t[5]||(t[5]=a=>u.ChooseHeYueType(2))},o(e.$t(`message.home.${i.spotLabel}`)),3)):y("",!0)])]),n.heYueType==0?(g(),T(f,{key:0,data:n.contractData,class:"width100","header-cell-style":u.getRowClass,"row-style":u.rowStyles,style:{margin:"20px 0"},"empty-text":e.$t("message.home.noData")},{default:m(()=>[l(r,{prop:"create_time_ts",label:e.$t("message.home.kaicangshijian"),formatter:u.getFormatTime},null,8,["label","formatter"]),l(r,{prop:"name",label:e.$t("message.user.heyue")},{default:m(a=>[s("div",null,o(a.row.name)+" "+o(e.$t("message.user.yongxu")),1)]),_:1},8,["label"]),l(r,{prop:"amount",label:e.$t("message.user.shuliang")},null,8,["label"]),l(r,{prop:"trade_avg_price",label:e.$t("message.home.jiage")},{default:m(a=>[s("div",null,o(a.row.trade_avg_price||a.row.price),1)]),_:1},8,["label"]),l(r,{prop:"fee",label:e.$t("message.user.shouxufei")},null,8,["label"]),l(r,{prop:"order_price_type",label:e.$t("message.jiaoyi.leixing")},{default:m(a=>[b(o(a.row.order_price_type=="limit"?e.$t("message.home.xianjiaweituo"):e.$t("message.home.shijiaweituo")),1)]),_:1},8,["label"]),l(r,{prop:"",label:e.$t("message.home.caozuo")},{default:m(a=>[l(v,{type:"primary",size:"small",onClick:h=>u.goContractPage(a.row.symbol)},{default:m(()=>[b(o(e.$t("message.home.home6")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data","header-cell-style","row-style","empty-text"])):y("",!0),n.heYueType==1?(g(),T(f,{key:1,data:n.deliveryData,class:"width100","empty-text":e.$t("message.home.noData"),"header-cell-style":u.getRowClass,"row-style":u.rowStyles,style:{margin:"20px 0"}},{default:m(()=>[l(r,{prop:"open_time",label:e.$t("message.home.kaicangshijian")},{default:m(a=>[s("div",null,o(a.row.open_time),1)]),_:1},8,["label"]),l(r,{prop:"name",label:e.$t("message.user.heyue")},{default:m(a=>[s("div",null,o(a.row.name)+" "+o(e.$t("message.user.jiaoge")),1)]),_:1},8,["label"]),l(r,{prop:"amount",label:e.$t("message.user.shuliang")},null,8,["label"]),l(r,{prop:"open_price",label:e.$t("message.user.kaicangjiage")},null,8,["label"]),l(r,{prop:"",label:e.$t("message.user.weishixianyingkui")},{default:m(a=>{var h;return[s("div",{class:p(a.row.profit>0?"green":"red")},[s("span",null,o(Number((h=a.row)==null?void 0:h.profit).toFixed(2)),1)],2)]}),_:1},8,["label"]),l(r,{prop:"time_num",label:e.$t("message.home.jiaogeshijian")},{default:m(a=>[s("div",null,o(a.row.time_num)+" "+o(a.row.time_unit),1)]),_:1},8,["label"])]),_:1},8,["data","empty-text","header-cell-style","row-style"])):y("",!0),n.heYueType==2?(g(),T(f,{key:2,data:n.spotData,class:"width100","header-cell-style":u.getRowClass,"row-style":u.rowStyles,style:{margin:"20px 0"},"empty-text":e.$t("message.home.noData")},{default:m(()=>[l(r,{prop:"create_time",label:e.$t("message.home.kaicangshijian")},{default:m(a=>[s("div",null,o(a.row.create_time),1)]),_:1},8,["label"]),l(r,{prop:"name",label:e.$t("message.home.jiaoyidui")},{default:m(a=>{var h;return[s("div",R,[s("span",E,o((h=a.row)==null?void 0:h.name),1)])]}),_:1},8,["label"]),l(r,{prop:"order_price_type",label:e.$t("message.jiaoyi.leixing")},{default:m(a=>[s("div",null,o(a.row.order_price_type=="limit"?e.$t("message.home.xianjiaweituo"):e.$t("message.home.shijiaweituo")),1)]),_:1},8,["label"]),l(r,{prop:"offset",label:e.$t("message.home.fangxiang")},{default:m(a=>[s("div",{class:p([a.row.offset=="open"?"buy":"sell"])},o(a.row.offset=="open"?e.$t("message.jiaoyi.mairu"):e.$t("message.home.maichu")),3)]),_:1},8,["label"]),l(r,{prop:"price",label:e.$t("message.jiaoyi.weituojiage")},null,8,["label"]),l(r,{prop:"volume",label:e.$t("message.user.shuliang")},null,8,["label"])]),_:1},8,["data","header-cell-style","row-style","empty-text"])):y("",!0),l(D,{style:{margin:"20px 0"},noPre:n.noPre,noNext:n.noNext,pageNum:n.pageNum,onChangePageNum:u.changePageNum},null,8,["noPre","noNext","pageNum","onChangePageNum"])])])}const te=x(z,[["render",V],["__scopeId","data-v-d1560c19"]]);export{te as A};
