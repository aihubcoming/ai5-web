import{u as L,l as r,q as R,aN as q,o as c,c as d,a as n,t as p,b as g,F as j,j as k,n as B,d as x,v as V,bo as y,J as b}from"./index-30627e35.js";/* empty css                 */import{a as E,b as G}from"./Group1884-dfcef245.js";import{A as T}from"./c2c-5d18aa1f.js";const X={class:"main-right"},w={class:"huihua"},H={class:"hui-top"},_={class:"hui-center",ref:"scroll"},N={class:"list-tiem"},P=["src"],M={class:"hui-bottom"},$={__name:"rightChat",props:{detailInfo:{type:Object,default:{}}},setup(O){const h=O,{t:m}=L(),i=r([]),f=r(),I=r(null),l=r();R(()=>{C()});const C=(s="")=>{var o,e;let t={messageId:s,orderNo:((o=h.detailInfo)==null?void 0:o.orderNo)||((e=h.detailInfo)==null?void 0:e.order_no)};T.getOtcOnlinechat(t).then(v=>{let a=v.data;if(F(),f.value||(f.value=a.length&&a[a.length-1].id),a.length)if(s)f.value=a[a.length-1].id,i.value=[...a.reverse(),...i.value];else{i.value=[...i.value,...a.reverse()];let J={};i.value=i.value.reduce(function(K,A){return J[A.id]||(J[A.id]=K.push(A)),K},[])}})},u=r(null),F=()=>{const s=document.getElementsByClassName("hui-center")[0];u.value=setTimeout(()=>{s.scrollTop=s.scrollHeight},1e3)},Q=s=>{const t=s.target.files[0];U(t)},U=s=>{y(s).then(t=>{S("img",t.httpUrl)})},Y=()=>{I.value.click()},S=(s="text",t="")=>{if(!t){this.$message.error(m("message.c2c.tip142"));return}T.sendOtcOnlinechat({orderNo:h.detailInfo.orderNo,type:s,content:t}).then(o=>{l.value="",F(),C()})};return q(()=>{u.value&&(clearTimeout(u.value),u.value=null)}),(s,t)=>{const o=b;return c(),d("div",X,[n("div",w,[n("div",H,p(g(m)("message.home.dibu18")),1),n("div",_,[(c(!0),d(j,null,k(g(i),(e,v)=>(c(),d("div",{class:"hui-li",key:v},[n("div",N,p(e.createtime),1),e.type==="text"?(c(),d("p",{key:0,class:B(["hui-n",[e.send_receive==="receive"?"bg-ta":"",e.send_receive==="receive"?"left-is-ta":"right-is-ta"]])},p(e.content),3)):(c(),d("img",{key:1,class:B([[e.send_receive==="receive"?"bg-ta":"",e.send_receive==="receive"?"left-is-ta":"right-is-ta"],"content-img"]),src:e.content},null,10,P))]))),128))],512),n("div",M,[n("img",{src:E,alt:"",onClick:Y}),n("input",{ref_key:"uploadRef",ref:I,type:"file",hidden:"",onChange:Q,accept:"image/png, image/gif, image/jpeg, image/bmp, image/x-icon"},null,544),x(o,{modelValue:g(l),"onUpdate:modelValue":t[0]||(t[0]=e=>V(l)?l.value=e:null),placeholder:g(m)("message.c2c.tip152")},null,8,["modelValue","placeholder"]),n("img",{onClick:t[1]||(t[1]=e=>S("text",g(l))),src:G,alt:""})])])])}}},ee="/svg/name-cf636685.svg",te="data:image/png;base64,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";export{$ as _,ee as a,te as b};
